<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link rel="shortcut icon" href="death.gif" type="image/gif" />
<title>Killer Queen - Death Heatmap</title>
</head>
<body>
<!-- TODO: Switch maps.-->

<div id="map" style="width: 960px; margin: auto; position: relative;">
<img src="map_day.png" width="960" height="540">
<canvas 
    width="960" height="540"
    style="position: absolute; top: 0; left: 0; opacity: 0.7;"
    id="canvas"></canvas>
</div>

<script src='simpleheat.js'></script>
<script>
'use strict';

const players = ['Queen', 'Stripes', 'Abs', 'Skulls', 'Checks'];
const colors = ['Gold', 'Blue'];

// https://github.com/mourner/simpleheat#simpleheat
let heat = simpleheat('canvas').max(12).radius(25, 40);


function addKill(v) {
  let [x, y, attacker, victim] = v.split(',');
  heat.add([x, y, 2]);
}


fetch('kills.txt')
    .then(r => r.text())
    .then(str => {
      for (let line of str.split('\n')) {
        let m = line.match(/^kill_day_[0-9]+ (.*)/);
        if (m) addKill(m[1]);
      }
      heat.draw(0.35);
    });

</script>
</body>
</html>
